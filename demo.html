<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swerve Toast UI Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            line-height: 1.6;
        }
        
        .demo-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .demo-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        button {
            padding: 10px 16px;
            border: 1px solid #007AFF;
            background: #007AFF;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 150ms ease;
        }
        
        button:hover {
            background: #0056CC;
            border-color: #0056CC;
        }
        
        button.secondary {
            background: white;
            color: #007AFF;
        }
        
        button.secondary:hover {
            background: #f0f0f0;
        }
        
        .settings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .setting-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        label {
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            color: #666;
        }
        
        select, input {
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .code-block {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 12px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }
        
        .bookmarklet-link {
            display: inline-block;
            padding: 15px 20px;
            background: #34C759;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            margin: 10px 0;
            transition: all 150ms ease;
        }
        
        .bookmarklet-link:hover {
            background: #2EA043;
            transform: translateY(-1px);
        }
        
        .content-area {
            margin-top: 40px;
            padding: 40px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        
        .content-area h3 {
            margin-top: 0;
            color: #333;
        }
        
        .content-area p {
            margin-bottom: 20px;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>ðŸš€ Swerve Toast UI Demo</h1>
    <p>This demo showcases the user-friendly UI feedback system for the Swerve bookmarklet. Test different notification types and configurations below.</p>
    
    <div class="demo-section">
        <h2>Toast Notifications</h2>
        <div class="demo-buttons">
            <button onclick="showInfoToast()">Info Toast</button>
            <button onclick="showSuccessToast()">Success Toast</button>
            <button onclick="showErrorToast()">Error Toast</button>
            <button onclick="showWarningToast()">Warning Toast</button>
            <button onclick="showLoadingToast()">Loading Toast</button>
            <button onclick="simulateUpload()" style="background: #FF9500; border-color: #FF9500;">Simulate Upload</button>
        </div>
        
        <div class="demo-buttons">
            <button class="secondary" onclick="clearAllToasts()">Clear All</button>
            <button class="secondary" onclick="toggleTheme()">Toggle Theme</button>
            <button class="secondary" onclick="changePosition()">Change Position</button>
        </div>
        
        <div class="settings">
            <div class="setting-group">
                <label for="duration">Duration (ms)</label>
                <input type="number" id="duration" value="3000" min="0" max="10000" step="500">
            </div>
            <div class="setting-group">
                <label for="position">Position</label>
                <select id="position">
                    <option value="top-right">Top Right</option>
                    <option value="top-left">Top Left</option>
                    <option value="bottom-right">Bottom Right</option>
                    <option value="bottom-left">Bottom Left</option>
                </select>
            </div>
            <div class="setting-group">
                <label for="theme">Theme</label>
                <select id="theme">
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                </select>
            </div>
        </div>
    </div>
    
    <div class="demo-section">
        <h2>Bookmarklet</h2>
        <p>Drag this link to your bookmarks bar to install the Swerve bookmarklet with the new UI system:</p>
        <a href="javascript:alert('Bookmarklet will be generated after build')" class="bookmarklet-link" id="bookmarklet-link">
            ðŸ“š Swerve (with UI feedback)
        </a>
        <p><small>Note: This is a demo version. Replace the endpoint URL with your actual service endpoint.</small></p>
        
        <h3>Generated Bookmarklet Code:</h3>
        <div class="code-block" id="bookmarklet-code">
            Building bookmarklet...
        </div>
    </div>
    
    <div class="content-area">
        <h3>Sample Content for Testing</h3>
        <p>This is some sample content that you can select and use to test the Swerve bookmarklet. The selection will be captured along with the page HTML when you run the bookmarklet.</p>
        
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        
        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        
        <ul>
            <li>Item 1 with some content</li>
            <li>Item 2 with more content</li>
            <li>Item 3 with even more content</li>
        </ul>
    </div>
    
    <script src="src/toast.js"></script>
    <script src="src/progress.js"></script>
    
    <script>
        let currentToast = null;
        let currentTheme = 'light';
        let currentPosition = 'top-right';
        
        function getToastInstance() {
            if (!currentToast) {
                currentToast = new SwerveToast({
                    position: currentPosition,
                    theme: currentTheme,
                    duration: parseInt(document.getElementById('duration').value)
                });
            }
            return currentToast;
        }
        
        function updateToastSettings() {
            if (currentToast) {
                currentToast.destroy();
                currentToast = null;
            }
            
            currentTheme = document.getElementById('theme').value;
            currentPosition = document.getElementById('position').value;
        }
        
        function showInfoToast() {
            const toast = getToastInstance();
            toast.show('info', 'Information', 'This is an informational message');
        }
        
        function showSuccessToast() {
            const toast = getToastInstance();
            toast.show('success', 'Success!', 'Your operation completed successfully');
        }
        
        function showErrorToast() {
            const toast = getToastInstance();
            toast.show('error', 'Error', 'Something went wrong with your request');
        }
        
        function showWarningToast() {
            const toast = getToastInstance();
            toast.show('warning', 'Warning', 'Please check your input and try again');
        }
        
        function showLoadingToast() {
            const toast = getToastInstance();
            const toastId = toast.show('loading', 'Loading...', 'Please wait while we process your request', {
                duration: 0,
                closable: true
            });
            
            // Auto-complete after 3 seconds for demo
            setTimeout(() => {
                toast.update(toastId, 'success', 'Loaded!', 'Operation completed successfully');
            }, 3000);
        }
        
        function simulateUpload() {
            const toast = getToastInstance();
            const progress = new SwerveProgress(toast);
            const operationId = 'demo_' + Date.now();
            
            progress.startOperation(operationId, 'Uploading Page');
            
            let completed = 0;
            const total = 5;
            
            const interval = setInterval(() => {
                completed++;
                progress.updateProgress(operationId, completed, total, `Processing chunk ${completed}/${total}`);
                
                if (completed >= total) {
                    clearInterval(interval);
                    setTimeout(() => {
                        progress.completeOperation(operationId, true, 'Upload completed successfully');
                    }, 500);
                }
            }, 800);
        }
        
        function clearAllToasts() {
            if (currentToast) {
                currentToast.clear();
            }
        }
        
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.getElementById('theme').value = currentTheme;
            updateToastSettings();
            
            const toast = getToastInstance();
            toast.show('info', 'Theme Changed', `Switched to ${currentTheme} theme`);
        }
        
        function changePosition() {
            const positions = ['top-right', 'top-left', 'bottom-right', 'bottom-left'];
            const currentIndex = positions.indexOf(currentPosition);
            currentPosition = positions[(currentIndex + 1) % positions.length];
            document.getElementById('position').value = currentPosition;
            updateToastSettings();
            
            const toast = getToastInstance();
            toast.show('info', 'Position Changed', `Moved to ${currentPosition.replace('-', ' ')}`);
        }
        
        // Update settings when changed
        document.getElementById('theme').addEventListener('change', updateToastSettings);
        document.getElementById('position').addEventListener('change', updateToastSettings);
        
        // Build bookmarklet code
        async function buildBookmarklet() {
            try {
                // This would normally call the build script
                // For the demo, we'll show a placeholder
                const placeholder = `javascript:(async()=>{/* Swerve bookmarklet with UI feedback system - see build.js to generate complete code */})();`;
                
                document.getElementById('bookmarklet-code').textContent = placeholder;
                document.getElementById('bookmarklet-link').href = placeholder;
            } catch (error) {
                console.error('Failed to build bookmarklet:', error);
            }
        }
        
        buildBookmarklet();
        
        // Show welcome message
        setTimeout(() => {
            const toast = getToastInstance();
            toast.show('info', 'Welcome to Swerve UI Demo!', 'Try the different toast types and settings', {
                duration: 5000
            });
        }, 500);
    </script>
</body>
</html>