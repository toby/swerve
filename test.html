<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swerve Bookmarklet Test</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif; 
            padding: 40px;
            max-width: 600px;
            margin: 0 auto;
        }
        .test-content {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .bookmarklet-link {
            display: inline-block;
            padding: 15px 25px;
            background: #007AFF;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            margin: 20px 0;
        }
        .bookmarklet-link:hover {
            background: #0056CC;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Swerve Bookmarklet Test Page</h1>
    
    <div class="instructions">
        <h3>Testing Instructions:</h3>
        <ol>
            <li>Drag the bookmarklet link below to your bookmarks bar</li>
            <li>Click on the bookmarklet while on this page</li>
            <li>Watch for the elegant toast notifications in the top-right corner</li>
            <li>The bookmarklet will attempt to send this page's content to the demo endpoint</li>
        </ol>
    </div>
    
    <a href="" id="bookmarklet" class="bookmarklet-link">
        ðŸ“š Test Swerve UI Feedback
    </a>
    
    <div class="test-content">
        <h2>Sample Content for Capture</h2>
        <p>This is test content that will be captured by the Swerve bookmarklet. The system will:</p>
        <ul>
            <li>Show a "Capturing Page" toast with loading spinner</li>
            <li>Display progress updates during data processing</li>
            <li>Show upload progress for chunked transfers</li>
            <li>Display success/error notifications</li>
        </ul>
        
        <p><strong>Select this text to test selection capture!</strong> The bookmarklet captures both the full page HTML and any text selection you have made.</p>
        
        <blockquote>
            "The beautiful thing about learning is nobody can take it away from you." - B.B. King
        </blockquote>
    </div>
    
    <div class="test-content">
        <h3>Expected UI Behavior:</h3>
        <ol>
            <li><strong>Initialization</strong>: "Capturing Page" toast appears with spinner</li>
            <li><strong>Data Processing</strong>: Progress updates from "1/3" to "3/3"</li>
            <li><strong>Upload</strong>: Shows chunk progress if page is large</li>
            <li><strong>Completion</strong>: Success toast with upload details, or error toast if failed</li>
        </ol>
        
        <p>All notifications should be:</p>
        <ul>
            <li>Non-blocking and positioned in corner</li>
            <li>Dismissible with close button</li>
            <li>Auto-dismiss after appropriate timing</li>
            <li>Styled to not interfere with page content</li>
        </ul>
    </div>
    
    <script>
        // Load the generated bookmarklet URL
        fetch('dist/bookmarklet.txt')
            .then(response => response.text())
            .then(bookmarkletUrl => {
                document.getElementById('bookmarklet').href = bookmarkletUrl;
            })
            .catch(error => {
                console.error('Could not load bookmarklet:', error);
                // Fallback for development
                document.getElementById('bookmarklet').href = 'javascript:alert("Please run the build script first: npm run build")';
            });
    </script>
</body>
</html>